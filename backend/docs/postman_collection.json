{
  "info": {
    "name": "Sistema de Gestão de Projetos API",
    "description": "API para gerenciar o ciclo de vida de projetos.",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Autenticação de Usuário",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "token"
              ]
            },
            "description": "Realiza login do usuário no sistema usando email e senha. Retorna um token JWT para autenticação em endpoints protegidos. Registra automaticamente um log de auditoria do login."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Projects",
      "item": [
        {
          "name": "Lista Projetos com Paginação",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "",
                  "description": "Filtrar por status do projeto",
                  "disabled": true
                },
                {
                  "key": "page",
                  "value": "",
                  "description": "Número da página",
                  "disabled": true
                },
                {
                  "key": "size",
                  "value": "",
                  "description": "Tamanho da página",
                  "disabled": true
                }
              ]
            },
            "description": "Retorna uma lista paginada de todos os projetos do sistema. Permite filtrar por status do projeto. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Cria um Novo Projeto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects"
              ]
            },
            "description": "Cria um novo projeto no sistema com os dados fornecidos. Registra automaticamente um log de auditoria da criação. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Implementa\\u00e7\\u00e3o Microsoft 365\",\n  \"client\": \"Empresa ABC Ltda\",\n  \"startDate\": \"2025-01-15\",\n  \"estimatedEndDate\": \"2025-06-30\",\n  \"orderValue\": \"R$ 150.000,00\",\n  \"proposal\": \"PROP-2024-001\",\n  \"pct\": \"PCT-2024-MS365-001\",\n  \"phase\": \"INCEPTION\",\n  \"status\": \"ACTIVE\",\n  \"project_manager_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"technical_lead_id\": \"550e8400-e29b-41d4-a716-446655440002\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Busca Projeto por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id"
              ]
            },
            "description": "Retorna os detalhes completos de um projeto específico pelo seu ID único. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Atualiza um Projeto Existente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:p_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":p_id"
              ]
            },
            "description": "Atualiza os dados de um projeto existente. Envia notificações automáticas quando há mudança de Project Manager ou Technical Lead. Registra log de auditoria da atualização. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Implementa\\u00e7\\u00e3o Microsoft 365 - Fase 2\",\n  \"client\": \"Empresa XYZ Ltda\",\n  \"startDate\": \"2025-02-01\",\n  \"estimatedEndDate\": \"2025-08-31\",\n  \"orderValue\": \"R$ 200.000,00\",\n  \"proposal\": \"PROP-2024-002\",\n  \"pct\": \"PCT-2024-MS365-002\",\n  \"phase\": \"ELABORATION\",\n  \"status\": \"HOLD\",\n  \"project_manager_id\": \"550e8400-e29b-41d4-a716-446655440004\",\n  \"technical_lead_id\": \"550e8400-e29b-41d4-a716-446655440005\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Exclui um Projeto",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:p_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":p_id"
              ]
            },
            "description": "Remove permanentemente um projeto do sistema. Registra log de auditoria da exclusão. Requer permissão de ADMIN apenas.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Avança Fase do Projeto",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/advance-phase",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "advance-phase"
              ]
            },
            "description": "Avança o projeto para a próxima fase do workflow, validando os quality gates necessários. Registra log de auditoria do avanço. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Cria Novo Usuário",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            },
            "description": "Registra um novo usuário no sistema com email, senha e role. Valida se o email já não está em uso. Não requer autenticação para permitir auto-registro.",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"usuario@empresa.com\",\n  \"password\": \"MinhaSenh@123\",\n  \"role\": \"MEMBER\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tasks",
      "item": [
        {
          "name": "Lista Tarefas do Projeto",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/tasks/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "tasks"
              ]
            },
            "description": "Retorna todas as tarefas associadas a um projeto específico. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Cria Nova Tarefa",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/tasks/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "tasks"
              ]
            },
            "description": "Cria uma nova tarefa dentro de um projeto específico. Envia notificação automática se um usuário for atribuído à tarefa. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Configurar Active Directory\",\n  \"description\": \"Configurar estrutura organizacional do AD com OUs e grupos de seguran\\u00e7a\",\n  \"status\": \"TODO\",\n  \"priority\": \"HIGH\",\n  \"dueDate\": \"2025-02-15\",\n  \"assigned_to_id\": \"550e8400-e29b-41d4-a716-446655440007\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Busca Tarefa por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/tasks/:task_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "tasks",
                ":task_id"
              ]
            },
            "description": "Retorna os detalhes de uma tarefa específica dentro de um projeto. Valida se a tarefa pertence ao projeto informado. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Atualiza Tarefa Existente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/tasks/:task_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "tasks",
                ":task_id"
              ]
            },
            "description": "Atualiza os dados de uma tarefa existente dentro de um projeto. Envia notificação automática se houver mudança na atribuição de usuário. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Configurar Active Directory - Atualizado\",\n  \"description\": \"Configurar AD com integra\\u00e7\\u00e3o ao Azure AD\",\n  \"status\": \"IN_PROGRESS\",\n  \"priority\": \"URGENT\",\n  \"dueDate\": \"2025-02-20\",\n  \"assigned_to_id\": \"550e8400-e29b-41d4-a716-446655440009\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Exclui uma Tarefa",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/tasks/:task_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "tasks",
                ":task_id"
              ]
            },
            "description": "Remove permanentemente uma tarefa de um projeto. Valida se a tarefa pertence ao projeto informado. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "Upload de Documento",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/documents/upload",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "documents",
                "upload"
              ]
            },
            "description": "Faz upload de um arquivo para um projeto específico. O arquivo é armazenado no sistema de arquivos e os metadados no banco de dados. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lista Documentos do Projeto",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/documents/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "documents"
              ]
            },
            "description": "Retorna todos os documentos associados a um projeto específico. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Atualiza Metadados do Documento",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/documents/:document_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "documents",
                ":document_id"
              ]
            },
            "description": "Atualiza os metadados de um documento existente (nome, descrição, etc.). Valida se o documento pertence ao projeto informado. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"BRD_Microsoft365_v2.0.pdf\",\n  \"type\": \"LLD\",\n  \"status\": \"UNDER_REVIEW\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Exclui um Documento",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/:project_id/documents/:document_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                ":project_id",
                "documents",
                ":document_id"
              ]
            },
            "description": "Remove permanentemente um documento do projeto, incluindo o arquivo físico do sistema de arquivos. Valida se o documento pertence ao projeto informado. Requer permissão de MANAGER ou ADMIN.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Projetos por Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/projects-by-status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "projects-by-status"
              ]
            },
            "description": "Retorna estatísticas de contagem de projetos agrupados por status (ativo, concluído, cancelado, etc.). Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Projetos por Fase",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/projects-by-phase",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "projects-by-phase"
              ]
            },
            "description": "Retorna estatísticas de contagem de projetos agrupados por fase do workflow (iniciação, planejamento, execução, etc.). Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Teste de Erro (Debug)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/debug/sentry-test",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "debug",
                "sentry-test"
              ]
            },
            "description": "Endpoint de debug que gera um erro intencional para testar o sistema de monitoramento Sentry. Não deve ser usado em produção."
          },
          "response": []
        },
        {
          "name": "Projetos por Project Manager",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/projects-by-pm",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "projects-by-pm"
              ]
            },
            "description": "Retorna estatísticas de contagem de projetos agrupados por Project Manager (GP). Mostra 'Unassigned' para projetos sem GP atribuído. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Projetos por Technical Lead",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/projects-by-tl",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "projects-by-tl"
              ]
            },
            "description": "Retorna estatísticas de contagem de projetos agrupados por Technical Lead (LT). Mostra 'Unassigned' para projetos sem LT atribuído. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Projetos por Cliente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/projects-by-client",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "projects-by-client"
              ]
            },
            "description": "Retorna estatísticas de contagem de projetos agrupados por cliente. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Projetos em Atraso",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/overdue-projects",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "overdue-projects"
              ]
            },
            "description": "Retorna uma lista de projetos em atraso. Um projeto é considerado em atraso se a data de término estimada passou e seu status ainda é 'ativo' ou 'em espera'. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Minhas Notificações",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "me"
              ]
            },
            "description": "Retorna todas as notificações não lidas do usuário autenticado. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Marcar Notificação como Lida",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/:notification_id/mark-as-read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                ":notification_id",
                "mark-as-read"
              ]
            },
            "description": "Marca uma notificação específica como lida. Valida se a notificação pertence ao usuário autenticado. Requer autenticação de qualquer usuário válido.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin: Audit Logs",
      "item": [
        {
          "name": "Get Audit Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/audit-logs/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "audit-logs"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "",
                  "description": "Número da página",
                  "disabled": true
                },
                {
                  "key": "size",
                  "value": "",
                  "description": "Tamanho da página",
                  "disabled": true
                }
              ]
            },
            "description": "Endpoint para consulta de logs de auditoria (apenas para administradores).\n\nRetorna uma lista paginada de todos os logs de auditoria do sistema,\nincluindo informações sobre o usuário que realizou a ação, a ação executada,\ndetalhes contextuais e timestamp.",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "health"
              ]
            },
            "description": "Verifica se a API está operacional."
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8002",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ]
}